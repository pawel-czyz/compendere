\section{Czym są kategorie?}
\begin{remk}
  Zbiory intuicyjnie rozumiane są jako pewne kolekcje, czyli woreczki, które mogą zawierać różne przedmioty. Taka intuicja czasami jednak prowadzi na manowce -- nie istnieje zbiór wszystkich zbiorów. Tymczasem zwrot ,,kolekcja wszystkich zbiorów'' jest intuicyjnie zrozumiały -- mimo, że nie może być zbiorem!

  Bardzo niefrasobliwie, nie będziemy przejmować się aksjomatyką ,,kolekcji''. Nasze notatki nie będą więc ścisłe w sensie teoriomnogościowym. Nie będziemy się tym przejmować -- szczegółów można douczyć się później, na razie wystarczy zrozumieć ideę.

  Czytelnik bardzo zainteresowany teorią mnogości, może zainteresować się \emph{uniwersami Grothendiecka} lub teoriami \emph{klas}, jak aksjomatyka NBG. Można też przyjąć, że język teorii kategorii jest ,,prawdziwy'' i w nim zbudować teorię zbiorów \cite{rethinking_set_theory}.
\end{remk}

\begin{idea}
  Zbiór to kolekcja elementów. \emph{Kategoria} to kolekcja obiektów i~strzałek, które łączą różne obiekty -- na przykład kolekcja wszystkich zbiorów połączona funkcjami, czy kolekcja wszystkich grup połączona homomorfizmami.

  Innymi słowy, zamiast odpowiadać na teoriomnogościowe pytanie o pojedynczy przedmiot: ,,jakie elementy ma ten zbiór?'' kładziemy nacisk na całościowe spojrzenie: ,,w jaki sposób ten obiekt oddziałuje z innymi?''.
\end{idea}

\begin{defn}
  \index{Kategoria}
  Będziemy nazywać $\C$ \emph{kategorią} jeśli:
    \begin{enumerate}
      \item Mamy pewną kolekcję \emph{obiektów} $A, B, C, \dots$ Będziemy oznaczać tę kolekcję przez $\Ob \C$,
      \item Mamy pewną kolekcję \emph{strzałek} $f, g, h\dots$ Strzałki będziemy nazywać też \emph{morfizmami},
      \item Każda strzałka $f$ łączy dokładnie dwa określone obiekty -- \emph{dziedzinę} z~\emph{przeciwdziedziną}. Ten fakt oznaczamy przez $\morph fAB$ lub $\morpharr fAB$,
      \item Strzałki można \emph{składać} w następujący sposób:
        \begin{enumerate}
          \item Jeśli $\morpharr fAB$ oraz $\morpharr gBC$, to istnieje strzałka $\morpharr {g\circ f}AC$. Będziemy czasami pisać $gf$ zamiast $g\circ f$,
          \item Jeśli $\morpharr fAB$, $\morpharr gBC$ oraz $\morpharr h CD$, to zachodzi $(h\circ g)\circ f = h\circ (g\circ f)$ (złożenie jest \emph{łączne}),
          \item Dla każdego obiektu $A$ istnieje strzałka $\morph{\id A}AA$ taka, że dla każdej $\morph fAB$ zachodzi $\id B \circ f = f = f \circ \id A$ (istnieją \emph{morfizmy identycznościowe}).
        \end{enumerate}
    \end{enumerate}
\end{defn}

\begin{exmp}
  \label{exmp:set}
  Kategorią $\Set$ nazywamy kolekcję wszystkich zbiorów, w której strzałka $\morpharr fAB$ to trójka $(A, f, B)$, gdzie $f$ jest funkcją ze zbioru $A$ w zbiór $B$. Złożenie strzałek określamy przez złożenie funkcji, a strzałki identycznościowe otrzymujemy z funkcji identycznościowych.

  Pojawia się pytanie -- dlaczego definiujemy strzałkę jako \emph{trójkę} zamiast po prostu funkcję? Teoriomnogościowo funkcje $\morph f{\mathbb R}{\mathbb R}$ oraz $\morph {f'}{\mathbb R}{\mathbb Z}$ zadane wzorem $x\mapsto 1$ są tym samym -- zbiorem $\mathbb R\times \{1\}$. W teorii kategorii jednak chcemy rozróżniać $f$ i $f'$, bo łączą różne zbiory. Dlatego ręcznie dodajemy informację o dziedzinie i~przeciwdziedzinie.

  Jako, że ręczne dodanie informacji jest proste, to popularnie (i nie do końca ściśle) mówi się, że $\Set$ to kategoria w której obiektami są zbiory, a~morfizmami są funkcje.
\end{exmp}

\begin{exmp}[Inne ,,standardowe'' kategorie]
  \label{exmp:standard}
  Podobnie jak w powyższym przykładzie, mamy kategorie (uwaga -- tak teoriomnogościowo to morfizmami są trójki, a nie funkcje):
  \begin{enumerate}
    % \item $\FinSet$ - obiektami są zbiory skończone, a morfizmami - funkcje,
    \item $\Grp$ -- obiektami są grupy, a morfizmami homomomorfizmy grup (składanie homomomorfizmów jest łączne, identycznościami są homomomorfizmy identycznościowe),
    \item $\Top$ -- obiektami są przestrzenie topologiczne, a morfizmami są funkcje ciągłe,
    % \item $\Mod R$ - obiektami są lewostronne moduły nad pierścieniem $R$, a morfizmami funkcje $R$-liniowe (analogicznie prawe moduły tworzą kategorię),
    \item $\Vect k$ -- obiektami są przestrzenie wektorowe nad ciałem $k$, a morfizmami są funkcje liniowe,
    % \item $\Ab$ - obiektami są grupy abelowe, a morfizmami homomomorfizmy grup (to też szczególny przypadek kategorii modułów - $R=\mathbb Z$),
    \item $\FinVect k$ -- obiektami są przestrzenie wektorowe skończonego wymiaru nad ciałem $k$, a morfizmami są funkcje liniowe.
  \end{enumerate}
  %
  Podobnych przykładów można wymieniać bez liku (monoidy, pierścienie, moduły nad ustalonym pierścieniem, rozmaitości różniczkowe\dots) -- często obiekty to po prostu zbiory wyposażone w dodatkową strukturę, a morfizmami są funkcje zachowujące tę strukturę. Należy jednak pamiętać, że \emph{kategorie obejmują także inne przykłady}.
\end{exmp}

\begin{exmp}
  Rozważmy kategorię, której obiektami są grupy, a morfizmami funkcje, niezależnie czy są homomorfizmami czy nie. To też jest kategoria, choć niezbyt użyteczna -- we wszystkich powyższych, popularnych kategoriach morfizmy w pewien sposób zachowują zadaną stukturę (jak działanie grupowe czy topologia).
\end{exmp}

\begin{exmp}
  Każdą kolekcję (w tym każdy zbiór) można traktować jak kategorię - obiektami są elementy kolekcji oraz wprowadzamy wyłącznie morfizmy identycznościowe. Często się rysuje taką kategorię jako:
  $$\bullet~\bullet~\bullet~\dots $$
  Obiekty są symbolizowane przez kropki i nie ma żadnych morfizmów poza identycznościowymi (pominiętymi na rysunku). Taką kategorię nazywamy \emph{dyskretną}.
\end{exmp}

\begin{exmp}
  \label{exmp:dwa}
  Kategorią \textbf{2} nazywamy kategorię, która ma dwa obiekty i jeden morfizm nieidentycznościowy. Rysujemy ją jako:
  $$\bullet \rightarrow \bullet$$
  Ponownie pominęliśmy na obrazku morfizmy identycznościowe.
\end{exmp}

\begin{nott}
  $\Mor AB$ to kolekcja wszystkich strzałek $\morpharr fAB$. W literaturze popularne są także oznaczenia\footnote{Dlaczego Hom, a nie Mor? Zapewne dlatego, że np. w teorii grup czy pierścieni, na strzałki mówi się \emph{homomorfizmy}.} $\bareMor_\C(A, B)$ lub $\mathrm{Mor}(A, B)$.
\end{nott}

\begin{defn}
  Kategorię nazywamy \emph{małą} jeśli kolekcje strzałek i obiektów są zbiorami.
  Nazywamy ją \emph{lokalnie małą} jeśli wszystkie kolekcje $\Mor AB$ są zbiorami.
\end{defn}

\begin{exc}
  Zastanów się:
  \begin{enumerate}
    \item Czy możliwe jest aby kolekcja strzałek nie była zbiorem, a kolekcja obiektów już tak?
    \item Czy możliwe jest aby kolekcja obiektów nie była zbiorem, a kolekcja strzałek już tak? Czyli -- czy obiektów może być ,,więcej'' niż strzałek?
    \item Dlaczego każda kategoria mała jest też lokalnie mała, ale nie na odwrót?
  \end{enumerate}
\end{exc}

% \begin{exmp}
%   Kategorie z przykładu \ref{exmp:standard} są lokalnie małe, lecz nie są małe.
% \end{exmp}

% \begin{remk}[Uwaga techniczna, można pominąć]
%   \label{remk:rozlaczne}
%   Warto zauważyć, że $\Mor AB$ oraz $\Mor{A'}{B'}$ są albo identyczne (gdy $A=A'$ i $B=B'$) albo rozłączne (w przeciwnym przypadku).
%   To wymaganie jest czysto techniczne (każda strzałka musi łączyć dokładnie dwa obiekty) - mając zbiory $\bareMor'(A, B)$, które nie są parami rozłączne możemy zastąpić je przez $\Mor AB =\{A\}\times \bareMor'(A, B) \times \{B\}$, to znaczy zamiast rozpatrywać $\morph fAB$ wystarczy rozpatrywać trójki uporządkowane $(A, f, B)$, tak samo jak w przykładzie \ref{exmp:set} o kategorii $\Set$.
% \end{remk}

% \begin{exmp}[\starred Dla topologów]
%   Można też definiować tak zwaną \emph{naiwną kategorię homotopii} $\textbf{hTop}$, w której obiektami są przestrzenie topologiczne, ale morfizmami są klasy abstrakcji homotopijnych funkcji (złożenie można określić przez reprezentantów, a morfizmem identycznościowym jest klasa abstrakcji funkcji identycznościowej). Tutaj też morfizmami nie są funkcje, lecz klasy abstrakcji funkcji.
% \end{exmp}

\begin{exc}[Kategoria $\SetStar$]
  \emph{Zbiorem z wyróżnionym punktem} nazywamy parę $(X, x_0)$, gdzie $x_0\in X$. Morfizmem $\morph f{(X, x_0)}{(Y, y_0)}$ nazywamy funkcję $\morph fXY$ taką, że $f(x_0)=y_0$. Przekonaj się, że jest to kategoria. (Czym jest złożenie morfizmów? Czy jest łączne? Czym są morfizmy identycznościowe?)
\end{exc}

\subsection{Zbiór częściowo uporządkowany jako kategoria}
\index{Zbiór częściowo uporządkowany}
\begin{idea}
  Każdy zbiór w naturalny sposób jest kategorią dyskretną -- morfizmami są wyłącznie identyczności. Nieco ciekawszą strukturę, z większą ilością strzałek, możemy uzyskać ze zbioru częściowo uporządkowanego.

  Takie kategorie zarówno stanowią bogate źródło kontrprzykładów jak i~przydają się do zdefiniowania bardziej zaawansowanych konstrukcji, jak granica odwrotna czy źdźbło presnopa.
\end{idea}

\begin{exmp}
  \label{exmp:dzielenie}
  {\newcommand{\divs}[2]{\iota_{#1}^{#2}}
  Rozważmy zbiór dodatnich liczb całkowitych $\mathbb Z^+=\{1, 2, \dots\}$. Definiujemy zbiory:
  $$
  \Mor km =
  \begin{cases}
    \{ \divs km \} &\text{ jeśli $k$ jest dzielnikiem $m$}\\
    \varnothing    &\text{ w przeciwnym przypadku}
  \end{cases}
  $$
  gdzie przyjęliśmy zapis $\divs km=(k, m)$.
  Definiujemy złożenie jako $\divs mn  \circ  \divs km = \divs kn$.
  Sprawdźmy czy wszystkie własności są spełnione:
  \begin{enumerate}
    \item \emph{Złożenie jest określone.} Weźmy dowolny element $\Mor km$ (dużego wyboru nie mamy -- $\divs km$) oraz dowolny element $\Mor mn$ (czyli $\divs mn$). Chcemy pokazać, że złożenie $\divs mn \circ \divs km = \divs kn$ jest dobrze określone, to znaczy, że $\divs kn \in \Mor kn$. Czytamy to jako: ,,jeśli $k$ dzieli $m$ oraz $m$ dzieli $n$, to $k$ dzieli $n$''.
    \item \emph{Istnieją funkcje identycznościowe.} $\id n = \divs nn$ jest dobrze określone bo $n$ dzieli $n$. Chcemy pokazać, że mnożenie przez identyczność niczego nie zmienia, to znaczy:
      $$\divs km \circ \divs kk = \divs km = \divs mm \circ \divs km$$
      Co jest oczywiste z naszej definicji złożenia.
    \item \emph{Złożenie jest łączne.} $$(\divs mn \circ \divs lm) \circ  \divs kl  = \divs ln \circ \divs kl = \divs kn = \divs mn \circ \divs km = \divs mn \circ (\divs lm \circ  \divs kl)$$
  \end{enumerate}
  }
\end{exmp}

\begin{exc}
  Przypomnijmy, że zbiór częściowo uporządkowany $(S, \le)$ ma następujące własności dla dowolnych $a, b, c \in S$:
  \begin{enumerate}
    \item $a\le a$,
    \item Jeśli $a\le b$ oraz $b\le a$, to $b=a$,
    \item Jeśli $a\le b$ oraz $b\le c$, to $a\le c$.
  \end{enumerate}
  %
  Posiłkując się przykładem \ref{exmp:dzielenie} pokaż, że \emph{każdy zbiór częściowo uporządkowany jest kategorią} jeśli wprowadzimy strzałki $\morpharr{} ab$ dla $a\le b$.
\end{exc}

\begin{exmp}
    Kategoria \textbf{2} z przykładu \ref{exmp:dwa} jest szczególnym przypadkiem zbioru częściowo uporządkowanego.
\end{exmp}

\begin{exmp}
  \label{exmp:natur}
  {\newcommand{\naturalnum}{\mathbb N}
  Liczby naturalne ze standardowym porządkiem są kategorią:
  \begin{center}
  \begin{tikzcd}
    1 \ar[r] \ar[rr, bend left] \ar[rrr, bend left=50] & 2 \ar[r] \ar[rr, bend left] & 3 \ar[r] & \dots
  \end{tikzcd}
  \end{center}
  Tradycyjnie na obrazku brakuje morfizmów identycznościowych (które wyglądają jak pętelki).
  }
\end{exmp}

\subsection{Diagramy przemienne}
\begin{defn}[Intuicyjna definicja diagramu]
  \emph{Diagram} to multigraf, którego wierzchołkami są obiekty, a krawędziami morfizmy.

  Mówimy, że diagram jest \emph{przemienny} jeśli mając dowolne dwa wierzchołki $A$ i $B$ oraz dwie dowolne ścieżki (niekoniecznie tej samej długości):

  \begin{center}
    \begin{tikzcd}
      & X_1 \ar[r, "f_2"] & X_2 \ar[r, "f_3"] & \dots \ar[r, "f_n"]& X_n \ar[dr, "f_{n+1}"]\\
      A \arrow[dr, "g_1", swap] \arrow[ru, "f_1"] & & &  & & B \\
      & Y_1 \ar[r, "g_2"] & Y_2 \ar[r, "g_3"]& \dots \ar[r, "g_m"]& Y_m\ar[ur, "g_{m+1}", swap]
    \end{tikzcd}
  \end{center}
  zachodzi równość $f_{n+1}\circ \dots \circ f_1 = g_{m+1}\circ \dots \circ g_1$.

  Innymi słowy -- gdy ustalimy początek i koniec, to nieważne jaką ścieżką pójdziemy, a wypadkowy morfizm będzie taki sam.
\end{defn}

\begin{exmp}
  Ten diagram jest przemienny wtedy i tylko wtedy gdy $g\circ f = i\circ h$.
  \begin{center}
    \begin{tikzcd}
      A \arrow[d, "h"] \arrow[r, "f"] &  B \arrow[d, "g"]\\
      C \arrow[r, "i"] & D
    \end{tikzcd}
  \end{center}
\end{exmp}

\begin{exc}
  Jaki aksjomat kategorii wyraża przemienność tego diagramu?
  \begin{center}
  \begin{tikzcd}
    A \ar[r, "f"] \ar[rr, bend left=50] & B \ar[r, "g"] \ar[rr, bend right=50] & C \ar[r, "h"] & D
  \end{tikzcd}
  \end{center}
\end{exc}

\begin{nott}
  Będziemy korzystać z przerywanej strzałki \begin{tikzcd} \bullet\arrow[r, dotted] & \bullet\end{tikzcd} postulując istnienie danego morfizmu.
\end{nott}

\begin{exmp} Diagram przemienny
  \begin{center}
  \begin{tikzcd}
    A \arrow[d, "f", swap] \arrow[r, dotted] &  C \\
    B \arrow[ru, "g", swap]
  \end{tikzcd}
  \end{center}
  postuluje istnienie strzałki $g\circ f$.
\end{exmp}

\begin{nott}
  Mówiąc, że \emph{istnieje dokładnie jedna} strzałka, która sprawia, że diagram jest przemienny, będziemy używać wykrzyknika \begin{tikzcd} \bullet\arrow["!", r, dotted] & \bullet\end{tikzcd}.
\end{nott}

\begin{exc}[$\Set_*$ dla bystrzaków]
  \label{exc:setstardlabystrzakow}
  {
  \newcommand{\bulletset}{\{\bullet\}}
  Aby nabrać więcej praktyki z diagramami przemiennymi, obejrzymy kategorię zbiorów z wyróżnionym punktem raz jeszcze, ale z nieco innego punktu widzenia.

  Wybierzmy dowolny jednopunktowy zbiór i oznaczmy go przez $\bulletset$. Jeśli $X$ jest niepustym zbiorem, to funkcja
  %\footnote{Raz jeszcze przypomnienie - przez funkcję rozumiemy trójkę (dziedzina, zbiór par (argument, wartość), przeciwdziedzina).}
  $\morph x\bulletset X$ wyznacza nam parę $(X, x_0)$, gdzie $x_0=x(\bullet)$. Innymi słowy obiektami są \emph{funkcje} ze zbioru $\bulletset$ w dowolne zbiory.

  Czym może być morfizm między funkcjami? Rozważmy $\morph x\bulletset X$ oraz $\morph y\bulletset Y$. Morfizmem $\morpharr fxy$ nazywamy \emph{diagram przemienny}:
  %
  \begin{center}
  \begin{tikzcd}
    &\bulletset \ar[ld, "x", swap] \ar[rd, "y"]\\
    X \ar[rr, "f"]& & Y
  \end{tikzcd}
  \end{center}
  %
  Jego przemienność oznacza $f(x_0) = (f\circ x)(\bullet) = y(\bullet) = y_0$. Alternatywnie, możemy myśleć o tym diagramie jak o funkcji $\morph fXY$ takiej, że $f(x_0)=y_0$.

  Zastanówmy się czym jest złożenie diagramów. Mając diagramy
  %
  \begin{center}
  \begin{tikzcd}
                   &\bulletset \ar[ld, "x", swap] \ar[rd, "y"] &   &               & \bulletset \ar[ld, "y", swap] \ar[rd, "z"]\\
    X \ar[rr, "f"] &                                           & Y & Y \ar[rr, "g"]&                                            & Z
  \end{tikzcd}
  \end{center}
  %
  określamy ich złożenie jako sklejenie wzdłuż wspólnej krawędzi:
  %
  \begin{center}
    \begin{tikzcd}
    & \bulletset \ar[ld, "x", swap] \ar[d, "y"] \ar[rd, "z"] & & & \bulletset \ar[ld, "x", swap] \ar[rd, "z"]\\
    X \ar[r, "f"] & Y \ar[r, "g"] & Z & X \ar[rr, "g\circ f"]& & Z
    \end{tikzcd}
  \end{center}
  %
  W ramach ćwiczenia:
  \begin{enumerate}
    \item Upewnij się, że $(g\circ f)(x_0) = z_0$.
    \item Narysuj diagram przedstawiający morfizm identycznościowy $\id x$. Czy identyczności ,,dobrze'' się składają?
    \item Pokaż, że składanie diagramów jest łączne.
  \end{enumerate}
  }
\end{exc}

% \begin{exc}[Kategoria strzałek]
%   % Kategoria strzałek
%   {
%   \newcommand{\ArrC}{\text{Arr}(\C)}
%   \newcommand{\MorC}{\text{Mor}(\C)}
%   Rozpatrzmy kategorię $\C$ i stwórzmy kolekcję wszystkich jej morfizmów $\MorC$. Stworzymy teraz nową kategorię $\ArrC$:
%   \begin{itemize}
%     \item $\Ob \ArrC = \MorC$ (czyli obiektami tej kategorii są strzałki $\morpharr fAB$),
%     \item morfizmem między strzałkami $\morpharr fAB$ oraz $\morpharr g {A'}{B'}$ nazywamy diagram przemienny:
%       \begin{center}
%       \begin{tikzcd}
%         A \ar[r, "f"] \ar[d, "a"] & B \ar[d, "b"]\\
%         A' \ar[r, "g"] & B'
%       \end{tikzcd}
%       \end{center}
%     \item mając dwa diagramy:
%       \begin{center}
%       \begin{tikzcd}
%         A \ar[r, "f"] \ar[d, "a"] & B \ar[d, "b"] & B  \ar[d, "b"] \ar[r, "h"] & \ar[d, "c"] C\\
%         A' \ar[r, "g"]            & B'            & B' \ar[r, "i"]             & C'
%       \end{tikzcd}
%       \end{center}
%       określamy ich złożenie jako sklejenie:
%       \begin{center}
%       \begin{tikzcd}
%         A \ar[r, "f"] \ar[d, "a"] & B  \ar[d, "b"] \ar[r, "h"] & \ar[d, "c"] C & A \ar[r, "h\circ f"] \ar[d, "a"] & C \ar[d, "c"]\\
%         A' \ar[r, "g"]            & B' \ar[r, "i"]             & C'            & A' \ar[r, "i\circ g"]            & C'
%       \end{tikzcd}
%       \end{center}
%
%   \end{itemize}
%   (Można myśleć o morfizmach $\Set_*$ jako o funkcjach zamieniających wyróżniony punkt na inny wyróżniony punkt - podobnie tutaj można myśleć o morfizmach jak o \emph{parach funkcji}.)
%
%   Pokaż, że jest to kategoria, czyli, że:
%   \begin{enumerate}
%     \item składanie morfizmów jest dobrze określone (dlaczego diagram przedstawiający złożenie jest przemienny?),
%     \item jest też łączne,
%     \item istnieją morfizmy identycznościowe, które się należycie składają.
%   \end{enumerate}
%   }
% \end{exc}
